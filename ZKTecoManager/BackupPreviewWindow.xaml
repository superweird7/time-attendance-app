<Window x:Class="ZKTecoManager.BackupPreviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© - Backup Preview" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        Background="White"
        WindowStyle="None"
        AllowsTransparency="True"
        FlowDirection="RightToLeft">

    <Window.Resources>
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Background="#667EEA">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#5568D3"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#CCCCCC"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Background="#10B981">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#059669"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Background="#EF4444">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#DC2626"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="WinBtn" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#40FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border CornerRadius="15" Background="White">
        <Border.Effect>
            <DropShadowEffect Color="#000000" Opacity="0.3" ShadowDepth="5" BlurRadius="20"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" CornerRadius="15,15,0,0" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#667EEA" Offset="0"/>
                        <GradientStop Color="#764BA2" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20,0">
                        <TextBlock Text="ðŸ“‹" FontSize="20" Margin="0,0,10,0"/>
                        <TextBlock Text="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©" FontSize="18" FontWeight="Bold" Foreground="White"/>
                    </StackPanel>

                    <Button Content="âœ•" Style="{StaticResource WinBtn}" Click="CloseButton_Click" HorizontalAlignment="Left" Margin="15,0"/>
                </Grid>
            </Border>

            <!-- Content -->
            <Grid Grid.Row="1" Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Backup Info -->
                <Border Grid.Row="0" Background="#F0F9FF" CornerRadius="10" Padding="20" Margin="0,0,0,15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" FontWeight="SemiBold" Foreground="#374151">
                            <Run Text="ðŸ“ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù: "/>
                            <Run x:Name="FileNameText" Text="-" Foreground="#667EEA"/>
                        </TextBlock>

                        <TextBlock Grid.Row="0" Grid.Column="1" FontWeight="SemiBold" Foreground="#374151">
                            <Run Text="ðŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø³Ø®Ø©: "/>
                            <Run x:Name="BackupDateText" Text="-" Foreground="#667EEA"/>
                        </TextBlock>

                        <TextBlock Grid.Row="1" Grid.Column="0" FontWeight="SemiBold" Foreground="#374151" Margin="0,10,0,0">
                            <Run Text="ðŸ’¾ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù: "/>
                            <Run x:Name="FileSizeText" Text="-" Foreground="#667EEA"/>
                        </TextBlock>

                        <TextBlock Grid.Row="1" Grid.Column="1" FontWeight="SemiBold" Foreground="#374151" Margin="0,10,0,0">
                            <Run Text="ðŸ–¥ï¸ Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²: "/>
                            <Run x:Name="MachineNameText" Text="-" Foreground="#667EEA"/>
                        </TextBlock>

                        <TextBlock Grid.Row="2" Grid.Column="0" FontWeight="SemiBold" Foreground="#374151" Margin="0,10,0,0">
                            <Run Text="ðŸ“Š Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø®Ø·Ø·: "/>
                            <Run x:Name="SchemaVersionText" Text="-" Foreground="#667EEA"/>
                        </TextBlock>

                        <TextBlock Grid.Row="2" Grid.Column="1" FontWeight="SemiBold" Foreground="#374151" Margin="0,10,0,0">
                            <Run Text="ðŸ“ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª: "/>
                            <Run x:Name="TotalRecordsText" Text="-" Foreground="#10B981" FontWeight="Bold"/>
                        </TextBlock>
                    </Grid>
                </Border>

                <!-- Tables Summary Header -->
                <TextBlock Grid.Row="1" Text="ðŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„" FontSize="16" FontWeight="Bold" Foreground="#374151" Margin="0,0,0,10"/>

                <!-- Tables Grid -->
                <Border Grid.Row="2" Background="#F9FAFB" CornerRadius="10" Padding="10">
                    <DataGrid x:Name="TablesGrid" AutoGenerateColumns="False" IsReadOnly="True"
                              HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                              BorderThickness="0" Background="Transparent"
                              RowHeight="40" CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„" Binding="{Binding TableName}" Width="200"/>
                            <DataGridTextColumn Header="Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª" Binding="{Binding RecordCount}" Width="120"/>
                            <DataGridTextColumn Header="Ø§Ù„ÙˆØµÙ" Binding="{Binding Description}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Border>
            </Grid>

            <!-- Footer -->
            <Border Grid.Row="2" Background="#F3F4F6" CornerRadius="0,0,15,15" Padding="20">
                <Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="âŒ Ø¥Ù„ØºØ§Ø¡" Style="{StaticResource DangerButton}" Click="CancelButton_Click" Margin="0,0,10,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button x:Name="RestoreButton" Content="âœ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø©" Style="{StaticResource SuccessButton}" Click="RestoreButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Loading Overlay -->
            <Border x:Name="LoadingOverlay" Visibility="Collapsed" Background="#80000000" CornerRadius="15" Grid.RowSpan="3">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Border Background="White" CornerRadius="15" Padding="40">
                        <StackPanel>
                            <TextBlock x:Name="LoadingText" Text="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„..." FontSize="16" FontWeight="SemiBold"
                                       Foreground="#374151" HorizontalAlignment="Center"/>
                            <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,15,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
