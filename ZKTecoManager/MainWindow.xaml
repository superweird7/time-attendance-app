<Window x:Class="ZKTecoManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ZKTecoManager"
        mc:Ignorable="d"
Title="برنامج البصمة" Height="820" Width="1400"
        Icon="app_logo.png"
        WindowStartupLocation="CenterScreen"
        Background="White"
        WindowStyle="None"
        AllowsTransparency="True"
        Loaded="MainWindow_Loaded">

    <Window.InputBindings>
        <KeyBinding Key="F10" Command="{Binding OpenShortcutsCommand}"/>
    </Window.InputBindings>

    <Window.Resources>
        <!-- Card Style with Gradient -->
        <Style x:Key="FeatureCard" TargetType="Button">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FFFFFF" Offset="0"/>
                        <GradientStop Color="#F8F9FA" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="#E3E7EB"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Width" Value="300"/>
            <Setter Property="Height" Value="150"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="16">
                            <Border.Effect>
                                <DropShadowEffect Color="#4A5568" Opacity="0.1" ShadowDepth="3" BlurRadius="10"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Stretch" 
                                              VerticalAlignment="Stretch"
                                              Margin="0"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#667EEA"/>
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#F0F4FF" Offset="0"/>
                                            <GradientStop Color="#E8EDFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        

        <!-- Header Button with Color -->
        <Style x:Key="HeaderBtn" TargetType="Button">
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="Foreground" Value="#4B5563"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#667EEA"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Window Button -->
        <Style x:Key="WinBtn" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#6B7280"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FEE2E2"/>
                                <Setter Property="Foreground" Value="#DC2626"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Navigation with Gradient -->
        <Border Grid.Row="0" BorderThickness="0,0,0,2" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#667EEA" Offset="0"/>
                    <GradientStop Color="#764BA2" Offset="0.5"/>
                    <GradientStop Color="#F093FB" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#667EEA" Offset="0"/>
                    <GradientStop Color="#F093FB" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Grid Margin="25,0">
                <!-- Left Side -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Background="White" CornerRadius="10" Padding="10,6" Margin="0,0,15,0">
                        <Border.Effect>
                            <DropShadowEffect Color="#000000" Opacity="0.2" ShadowDepth="2" BlurRadius="8"/>
                        </Border.Effect>
                        <TextBlock FontSize="20" FontWeight="Bold">
                            <Run Text="برنامج" Foreground="#667EEA"/>
                            <Run Text=" البصمة" Foreground="#764BA2"/>
                        </TextBlock>
                    </Border>
                    <TextBlock Text="" FontSize="20" FontWeight="Light" Foreground="White" VerticalAlignment="Center"/>
                    <Rectangle Width="2" Height="30" Fill="#FFFFFF" Opacity="0.3" Margin="20,0"/>
                    <TextBlock x:Name="WelcomeTextBlock" FontSize="13" Foreground="White" VerticalAlignment="Center" Opacity="0.9"/>
                </StackPanel>

                <!-- Right Side -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <!-- Font Size Controls -->
                    <Border Background="#1F2937" CornerRadius="8" Margin="0,0,12,0" Padding="6,4">
                        <Border.Effect>
                            <DropShadowEffect Color="#000000" Opacity="0.3" ShadowDepth="1" BlurRadius="4"/>
                        </Border.Effect>
                        <StackPanel Orientation="Horizontal">
                            <Button Style="{StaticResource WinBtn}" Content="A-" Click="DecreaseFontSize_Click"
                                    Foreground="#F9FAFB" Background="#374151" Width="32" Height="28" FontSize="13" FontWeight="Bold"
                                    ToolTip="Decrease font size (Ctrl+-)"/>
                            <TextBlock x:Name="FontSizeDisplay" Text="100%" Foreground="#10B981"
                                       VerticalAlignment="Center" FontSize="12" FontWeight="Bold"
                                       Margin="8,0" MinWidth="40" TextAlignment="Center"/>
                            <Button Style="{StaticResource WinBtn}" Content="A+" Click="IncreaseFontSize_Click"
                                    Foreground="#F9FAFB" Background="#374151" Width="32" Height="28" FontSize="13" FontWeight="Bold"
                                    ToolTip="Increase font size (Ctrl++)"/>
                        </StackPanel>
                    </Border>
                    <Button Style="{StaticResource HeaderBtn}" Click="ChangePasswordButton_Click" Margin="0,0,8,0" Background="White" Foreground="#667EEA">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🔒" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Text="تغيير الباسورد" FontFamily="Segoe UI, Tahoma, Arial"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="WebDashboardButton" Style="{StaticResource HeaderBtn}" Click="WebDashboardButton_Click" Margin="0,0,8,0" Background="#10B981" Foreground="White">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🌐" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock x:Name="WebDashboardButtonText" Text="Web" FontFamily="Segoe UI, Tahoma, Arial"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="AdminPanelButton" Style="{StaticResource HeaderBtn}" Click="AdminPanelButton_Click" Visibility="Collapsed" Margin="0,0,12,0" Background="White" Foreground="#764BA2">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="👤" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock Text="Admin"/>
                        </StackPanel>
                    </Button>
                    <Button Style="{StaticResource WinBtn}" Content="─" Click="MinimizeButton_Click" Foreground="White"/>
                    <Button Style="{StaticResource WinBtn}" Content="✕" Click="QuitButton_Click" Foreground="White"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content with Gradient Background -->
        <Grid Grid.Row="1">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#F9FAFB" Offset="0"/>
                    <GradientStop Color="#F3F4F6" Offset="0.5"/>
                    <GradientStop Color="#E5E7EB" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <StackPanel Margin="30,25">
                    <!-- Header Section with Color -->
                    <Border Background="White" CornerRadius="15" Padding="25,20" Margin="0,0,0,25">
                        <Border.Effect>
                            <DropShadowEffect Color="#4A5568" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                        </Border.Effect>
                        <Grid>
                            <StackPanel>
                                <TextBlock FontSize="30" FontWeight="Bold">
                                    <Run Text="Dashboard" Foreground="#667EEA"/>
                                </TextBlock>
                                <TextBlock FontSize="15" Foreground="#6B7280" Margin="0,6,0,0">
                                    <Run Text="لوحة التحكم الرئيسية"/>
                                    <Run Text=" • " Foreground="#D1D5DB"/>
                                    <Run Text="Main Control Panel"/>
                                </TextBlock>
                            </StackPanel>
                            <Border Background="#10B981" CornerRadius="10" Padding="12,6" HorizontalAlignment="Right" VerticalAlignment="Center">
                                <TextBlock FontSize="12" FontWeight="SemiBold" Foreground="White">
                                    <Run Text="● ONLINE"/>
                                </TextBlock>
                            </Border>
                        </Grid>
                    </Border>

                    <!-- Feature Cards Grid -->
                    <WrapPanel>
                        <!-- Dashboard (NEW) -->
                        <Button x:Name="DashboardButton" Style="{StaticResource FeatureCard}" Click="DashboardButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#10B981" Offset="0"/>
                                            <GradientStop Color="#3B82F6" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#10B981" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="📊" FontSize="36"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Dashboard" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="لوحة المتابعة" FontSize="14" Foreground="#10B981" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Real-time attendance KPIs" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Employees -->
                        <Button Style="{StaticResource FeatureCard}" Click="EmployeesButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#667EEA" Offset="0"/>
                                            <GradientStop Color="#764BA2" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#667EEA" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="👥" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Employees" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="الموظفين" FontSize="14" Foreground="#667EEA" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Manage your team members" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Departments -->
                        <Button Style="{StaticResource FeatureCard}" Click="DepartmentsButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#F59E0B" Offset="0"/>
                                            <GradientStop Color="#EF4444" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#F59E0B" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="🏢" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Departments" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="الأقسام" FontSize="14" Foreground="#F59E0B" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Organize structure" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Shifts -->
                        <Button Style="{StaticResource FeatureCard}" Click="ShiftsButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#10B981" Offset="0"/>
                                            <GradientStop Color="#059669" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#10B981" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="⏰" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Shifts" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="الورديات" FontSize="14" Foreground="#10B981" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Schedule work hours" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Leave Management -->
                        <Button x:Name="LeaveManagementButton" Style="{StaticResource FeatureCard}" Click="LeaveManagementButton_Click" Visibility="Collapsed">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#8B5CF6" Offset="0"/>
                                            <GradientStop Color="#EC4899" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#8B5CF6" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="🏖️" FontSize="36"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Leave Management" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="إدارة الإجازات" FontSize="14" Foreground="#8B5CF6" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Track employee leaves" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Devices -->
                        <Button x:Name="DevicesButton" Style="{StaticResource FeatureCard}" Click="DevicesButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#EF4444" Offset="0"/>
                                            <GradientStop Color="#DC2626" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EF4444" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="📱" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Devices" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="الأجهزة" FontSize="14" Foreground="#EF4444" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Control hardware" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Reports -->
                        <Button x:Name="ReportsButton" Style="{StaticResource FeatureCard}" Click="ReportsButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#8B5CF6" Offset="0"/>
                                            <GradientStop Color="#6366F1" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#8B5CF6" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="📊" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Reports" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="التقارير" FontSize="14" Foreground="#8B5CF6" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="View analytics" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Exceptions Management -->
                        <Button Style="{StaticResource FeatureCard}" Click="ManageExceptionsButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#F59E0B" Offset="0"/>
                                            <GradientStop Color="#10B981" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#F59E0B" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="🧩" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Exceptions" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="إدارة الاستثناءات" FontSize="14" Foreground="#F59E0B" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Manage exceptions" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- ✅ NEW: Backup & Security -->
                        <!-- ✅ NEW: Backup & Security - VISIBLE TO ALL USERS -->
                        <Button x:Name="BackupButton" Style="{StaticResource FeatureCard}" Click="BackupButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#EC4899" Offset="0"/>
                                            <GradientStop Color="#DB2777" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EC4899" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="💾" FontSize="36"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Backup" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="النسخ الاحتياطي" FontSize="14" Foreground="#EC4899" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Data security" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Data Sync (F7) -->
                        <Button x:Name="SyncButton" Style="{StaticResource FeatureCard}" Click="SyncButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#3B82F6" Offset="0"/>
                                            <GradientStop Color="#1D4ED8" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#3B82F6" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="🔄" FontSize="36"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Data Sync" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="مزامنة البيانات" FontSize="14" Foreground="#3B82F6" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Multi-location sync (F7)" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Changes Log (F8) -->
                        <Button x:Name="ChangesLogButton" Style="{StaticResource FeatureCard}" Click="ChangesLogButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#14B8A6" Offset="0"/>
                                            <GradientStop Color="#0D9488" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#14B8A6" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="📋" FontSize="36"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="Changes Log" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="سجل التغييرات" FontSize="14" Foreground="#14B8A6" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="View all changes (F8)" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- System Health (F9) -->
                        <Button x:Name="SystemHealthButton" Style="{StaticResource FeatureCard}" Click="SystemHealthButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#84CC16" Offset="0"/>
                                            <GradientStop Color="#65A30D" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#84CC16" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="💊" FontSize="36"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="System Health" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="صحة النظام" FontSize="14" Foreground="#84CC16" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="Monitor system status (F9)" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- About -->
                        <Button Style="{StaticResource FeatureCard}" Click="AboutButton_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="80" Height="80" CornerRadius="16" Margin="20,0,20,0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#06B6D4" Offset="0"/>
                                            <GradientStop Color="#0891B2" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#06B6D4" Opacity="0.3" ShadowDepth="0" BlurRadius="12"/>
                                    </Border.Effect>
                                    <TextBlock Text="ℹ️" FontSize="36" 
                                               HorizontalAlignment="Center" 
                                               VerticalAlignment="Center"
                                               Foreground="White"/>
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="About" FontSize="18" FontWeight="Bold" Foreground="#1F2937"/>
                                    <TextBlock Text="حول" FontSize="14" Foreground="#06B6D4" Margin="0,4,0,0" FontWeight="SemiBold"/>
                                    <TextBlock Text="App information" FontSize="11" Foreground="#6B7280" Margin="0,8,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>
                    </WrapPanel>

                    <!-- Info Footer with Gradient -->
                    <Border CornerRadius="15" Padding="25,18" Margin="10,30,10,20">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="White" Offset="0"/>
                                <GradientStop Color="#F9FAFB" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Effect>
                            <DropShadowEffect Color="#4A5568" Opacity="0.08" ShadowDepth="2" BlurRadius="12"/>
                        </Border.Effect>
                        <Grid>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Border Background="#10B981" Width="12" Height="12" CornerRadius="6" Margin="0,0,12,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#10B981" Opacity="0.4" ShadowDepth="0" BlurRadius="6"/>
                                    </Border.Effect>
                                </Border>
                                <TextBlock FontSize="14" FontWeight="SemiBold">
                                    <Run Text="System Status: Active" Foreground="#10B981"/>
                                    <Run Text=" • " Foreground="#D1D5DB"/>
                                    <Run Text="حالة النظام: نشط" Foreground="#10B981"/>
                                </TextBlock>
                            </StackPanel>
                            <Border Background="#F3F4F6" CornerRadius="8" Padding="12,6" HorizontalAlignment="Right" VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock FontSize="13" FontWeight="SemiBold" Foreground="#6B7280">
                                        <Run Text="User • مستخدم: "/>
                                    </TextBlock>
                                    <TextBlock x:Name="UserNameTextBlock" 
                                               FontSize="13" 
                                               FontWeight="SemiBold" 
                                               Foreground="#667EEA"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
